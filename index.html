<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Mega Menu 測試</title>
  <style>
    /* 導覽列樣式 */
    .navbar {
      display: flex;
      background-color: #333;
      padding: 10px;
    }

    .navbar a {
      color: white;
      padding: 12px 16px;
      text-decoration: none;
      position: relative;
    }

    .navbar .mega-dropdown {
      position: relative;
    }

    /* mega menu 視窗樣式 */
    .mega-menu {
      position: absolute;
      top: 100%;
      left: 0;
      width: 600px;
      background-color: white;
      border: 1px solid #ccc;
      display: flex;
      gap: 20px;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 999;
    }

    .mega-menu-column {
      flex: 1;
    }

    .mega-menu-column h4 {
      margin-bottom: 10px;
      color: #333;
    }

    .mega-menu-column a {
      display: block;
      padding: 5px 0;
      color: #333;
      text-decoration: none;
    }

    .mega-menu-column a:hover {
      color: #007BFF;
    }
  </style>
</head>
<body>

  <!-- 導覽列 -->
  <div class="navbar">
    <div class="mega-dropdown">
      <a href="issue.html">爭議議案簡述</a>
    </div>
    <div class="mega-dropdown">
      <a href="law.html">法律知識科普區</a>
    </div>
    <a href="other.html">其他連結</a>
  </div>

  <!-- mega menu：爭議議案簡述 -->
  <div class="mega-menu" id="megaMenu1">
    <div class="mega-menu-column">
      <h4>勞動權益</h4>
      <a href="#">加班工時改革</a>
      <a href="#">最低工資調整</a>
    </div>
    <div class="mega-menu-column">
      <h4>社會保障</h4>
      <a href="#">年金改革</a>
      <a href="#">育嬰津貼政策</a>
    </div>
    <div class="mega-menu-column">
      <h4>稅制改革</h4>
      <a href="#">富人稅調整</a>
      <a href="#">碳稅立法</a>
    </div>
  </div>

  <!-- mega menu：法律知識科普區 -->
  <div class="mega-menu" id="megaMenu2">
    <div class="mega-menu-column">
      <h4>民事法律</h4>
      <a href="#">契約基本原則</a>
      <a href="#">侵權責任介紹</a>
    </div>
    <div class="mega-menu-column">
      <h4>刑事法律</h4>
      <a href="#">刑法基礎</a>
      <a href="#">犯罪構成要件</a>
    </div>
    <div class="mega-menu-column">
      <h4>行政法與憲法</h4>
      <a href="#">行政處分定義</a>
      <a href="#">憲法基本權</a>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    if (window.innerWidth >= 769) {
      const dropdowns = document.querySelectorAll('.mega-dropdown');
      const megaMenu1 = document.getElementById('megaMenu1');
      const megaMenu2 = document.getElementById('megaMenu2');
      let activeMenu = null;
      let hideTimeout;

      function showMenu(menu) {
        clearTimeout(hideTimeout);
        if (activeMenu && activeMenu !== menu) {
          activeMenu.style.opacity = '0';
          activeMenu.style.pointerEvents = 'none';
        }
        menu.style.opacity = '1';
        menu.style.pointerEvents = 'auto';
        activeMenu = menu;
      }

      function hideMenus() {
        if (activeMenu) {
          activeMenu.style.opacity = '0';
          activeMenu.style.pointerEvents = 'none';
          activeMenu = null;
        }
      }

      const targetMap = {
        "爭議議案簡述": megaMenu1,
        "法律知識科普區": megaMenu2
      };

      dropdowns.forEach(dropdown => {
        const link = dropdown.querySelector('a');
        const linkText = link.innerText;
        const targetMenu = targetMap[linkText];
        if (!targetMenu) return;

        dropdown.addEventListener('mouseenter', () => showMenu(targetMenu));
        dropdown.addEventListener('mouseleave', () => {
          hideTimeout = setTimeout(hideMenus, 200);
        });

        targetMenu.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
        targetMenu.addEventListener('mouseleave', () => {
          hideTimeout = setTimeout(hideMenus, 200);
        });

        // 延遲跳轉連結
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const href = this.href;
          setTimeout(() => {
            window.location.href = href;
          }, 300);
        });
      });
    }
  </script>

</body>
</html>
